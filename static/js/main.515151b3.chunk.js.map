{"version":3,"sources":["constants.js","reducer.js","components/battlefield/battlefield.jsx","utils.js","components/app/app.jsx","index.js"],"names":["CellSymbols","GameTurns","GameStages","extend","a","b","Object","assign","initialState","cells","Array","fill","map","symbol","isVictorious","turn","gameStage","ActionType","ActionCreator","type","payload","stage","makeCellTemplate","cellName","id","onCellClick","key","onClick","className","width","height","xlinkHref","Battlefield","cell","i","newCellClick","getCellCoords","cellNumber","boardSize","x","y","Math","floor","connect","state","dispatch","activeCell","currentCells","currentTurn","newCells","activeCellCoords","filterBy","checkCoords","index","cellCoords","filterBySymbol","currentRow","filter","cellX","cellY","currentColumn","straightDiagonal","reverseDiagonal","length","forEach","isVictoryFound","Error","toggleGameTurn","gameTurn","mapToWinStage","statusText","String","fromCodePoint","store","createStore","action","window","__REDUX_DEVTOOLS_EXTENSION__","f","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.515151b3.chunk.js","sourcesContent":["export const BOARDSIZE = 3;\r\n\r\nexport const CellSymbols = {\r\n  EMPTY: `EMPTY`,\r\n  CROSS: `CROSS`,\r\n  NOUGHT: `NOUGHT`,\r\n};\r\n\r\nexport const GameTurns = {\r\n  CROSSES: `Crosses`,\r\n  NOUGHTS: `Noughts`,\r\n  NOBODYS: `Nobody's`,\r\n};\r\n\r\nexport const GameStages = {\r\n  PLAYING: `PLAYING`,\r\n  CROSSES_WINS: `CROSSES_WINS`,\r\n  NOUGHTS_WINS: `NOUGHTS_WINS`,\r\n  DRAW: `DRAW`,\r\n};\r\n","import {CellSymbols, GameTurns, GameStages} from \"./constants\";\r\n\r\nconst extend = (a, b) => {\r\n  return Object.assign({}, a, b);\r\n};\r\n\r\nconst initialState = {\r\n  cells: Array(9).fill(null).map(() => ({symbol: CellSymbols.EMPTY, isVictorious: false})),\r\n  turn: GameTurns.CROSSES,\r\n  gameStage: GameStages.PLAYING,\r\n};\r\n\r\nconst ActionType = {\r\n  SET_CELLS: `SET_CELLS`,\r\n  SET_TURN: `SET_TURN`,\r\n  SET_GAME_STAGE: `SET_GAME_STAGE`,\r\n};\r\n\r\nconst ActionCreator = {\r\n  setCells: (cells) => ({\r\n    type: ActionType.SET_CELLS,\r\n    payload: cells,\r\n  }),\r\n  setTurn: (turn) => ({\r\n    type: ActionType.SET_TURN,\r\n    payload: turn,\r\n  }),\r\n  setGameStage: (stage) => ({\r\n    type: ActionType.SET_GAME_STAGE,\r\n    payload: stage,\r\n  }),\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ActionType.SET_CELLS:\r\n      return extend(state, {\r\n        cells: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_TURN:\r\n      return extend(state, {\r\n        turn: action.payload,\r\n      });\r\n\r\n    case ActionType.SET_GAME_STAGE:\r\n      return extend(state, {\r\n        gameStage: action.payload,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n\r\nexport {reducer, ActionType, ActionCreator};\r\n","import React from \"react\";\r\nimport {CellSymbols} from \"../../constants\";\r\n\r\nconst makeCellTemplate = (cellName, isVictorious, id, onCellClick) => {\r\n  return (\r\n    <div\r\n      key={id}\r\n      onClick={onCellClick}\r\n      className={`battlefield__cell battlefield__cell--${cellName} ${isVictorious ? `battlefield__cell--victory` : ``}`}>\r\n      <svg width=\"50\" height=\"50\">\r\n        <use xlinkHref={`#${cellName}`}/>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Battlefield = ({cells, turn, onCellClick}) => {\r\n\r\n  return (\r\n      <div className=\"game-screen__battlefield battlefield\">\r\n        {\r\n          cells.map((cell, i) => {\r\n            const newCellClick = () => {onCellClick(i, cells, turn)};\r\n            switch (cell.symbol) {\r\n              case CellSymbols.CROSS:\r\n                return makeCellTemplate(`cross`, cell.isVictorious, i, newCellClick);\r\n              case CellSymbols.NOUGHT:\r\n                return makeCellTemplate(`nought`, cell.isVictorious, i, newCellClick);\r\n              case CellSymbols.EMPTY:\r\n              default:\r\n                return <div key={i} onClick={newCellClick} className=\"battlefield__cell\"/>;\r\n            }\r\n          })\r\n        }\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Battlefield;\r\n","import {GameStages, GameTurns} from \"./constants\";\r\n\r\nexport const mapToWinStage = (gameTurn) => {\r\n  switch (gameTurn) {\r\n    case GameTurns.CROSSES:\r\n      return GameStages.CROSSES_WINS;\r\n    case GameTurns.NOUGHTS:\r\n      return GameStages.NOUGHTS_WINS;\r\n    default:\r\n      throw new Error(`Invalid turn type: ${gameTurn}`);\r\n  }\r\n};\r\n\r\nexport const toggleGameTurn = (currentTurn) => {\r\n  switch (currentTurn) {\r\n    case GameTurns.CROSSES:\r\n      return GameTurns.NOUGHTS;\r\n    case GameTurns.NOUGHTS:\r\n      return GameTurns.CROSSES;\r\n    case GameTurns.NOBODYS:\r\n      return GameTurns.NOBODYS;\r\n    default:\r\n      throw new Error(`Unsupported turn type: ${currentTurn}`);\r\n  }\r\n};\r\n\r\nexport const getCellCoords = (cellNumber, boardSize) => {\r\n  return {\r\n    x: cellNumber % boardSize,\r\n    y: Math.floor(cellNumber / boardSize),\r\n  };\r\n};\r\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport {ActionCreator} from \"../../reducer\";\nimport './app.css';\nimport Battlefield from '../../components/battlefield/battlefield.jsx';\nimport {BOARDSIZE, CellSymbols, GameStages, GameTurns} from \"../../constants\";\nimport {getCellCoords, mapToWinStage, toggleGameTurn} from \"../../utils\";\n\nconst App = ({cells, turn, gameStage, onCellClick}) => {\n  let statusText = `Let's play!`;\n  switch (gameStage) {\n    case GameStages.PLAYING:\n      statusText = `Waiting for ${turn}...`;\n      break;\n    case GameStages.NOUGHTS_WINS:\n      statusText = `${GameTurns.NOUGHTS} wins! ${String.fromCodePoint(0x1F44F)}`;\n      break;\n    case GameStages.CROSSES_WINS:\n      statusText = `${GameTurns.CROSSES} wins! ${String.fromCodePoint(0x1F44F)}`;\n      break;\n    case GameStages.DRAW:\n      statusText = `It's a draw, so friendship won! ${String.fromCodePoint(0x1F44A)}`;\n      break;\n    default:\n      break;\n  }\n\n  return (\n    <section className=\"game-screen\">\n      <div className=\"game-screen__status-bar\">{statusText}</div>\n      <Battlefield cells={cells} turn={turn} onCellClick={onCellClick}/>\n    </section>\n  );\n};\n\nconst isVictoryFound = (activeCellCoords, newCells, activeCell) => {\n  const filterBy = (checkCoords) => {\n    return function (cell, index) {\n      const cellCoords = getCellCoords(index, BOARDSIZE);\n      return checkCoords(cellCoords.x, cellCoords.y);\n    }\n  };\n\n  const filterBySymbol = (cell) => {\n    return cell.symbol === newCells[activeCell].symbol;\n  };\n\n  const currentRow = newCells.filter(filterBy((cellX, cellY) => cellY === activeCellCoords.y));\n  const currentColumn = newCells.filter(filterBy((cellX) => cellX === activeCellCoords.x));\n  const straightDiagonal = newCells.filter(filterBy((cellX, cellY) => cellX === cellY));\n  const reverseDiagonal = newCells.filter(filterBy((cellX, cellY) =>  cellX === BOARDSIZE - cellY - 1));\n\n  switch (true) {\n    case currentRow.filter(filterBySymbol).length === BOARDSIZE:\n      currentRow.forEach((cell) => cell.isVictorious = true);\n      return true;\n    case currentColumn.filter(filterBySymbol).length === BOARDSIZE:\n      currentColumn.forEach((cell) => cell.isVictorious = true);\n      return true;\n    case straightDiagonal.filter(filterBySymbol).length === BOARDSIZE:\n      straightDiagonal.forEach((cell) => cell.isVictorious = true);\n      return true;\n    case reverseDiagonal.filter(filterBySymbol).length === BOARDSIZE:\n      reverseDiagonal.forEach((cell) => cell.isVictorious = true);\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst mapStateToProps = (state) => ({\n  cells: state.cells,\n  turn: state.turn,\n  gameStage: state.gameStage,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onCellClick(activeCell, currentCells, currentTurn) {\n    if (currentCells[activeCell].symbol !== CellSymbols.EMPTY) {\n      return;\n    }\n\n    const newCells = currentCells.map(cell => ({...cell}));\n\n    if (currentTurn === GameTurns.CROSSES) {\n      newCells[activeCell].symbol = CellSymbols.CROSS;\n    } else if (currentTurn === GameTurns.NOUGHTS) {\n      newCells[activeCell].symbol = CellSymbols.NOUGHT;\n    } else {\n      return;\n    }\n\n    dispatch(ActionCreator.setCells(newCells));\n\n    const activeCellCoords = getCellCoords(activeCell, BOARDSIZE);\n\n    if (isVictoryFound(activeCellCoords, newCells, activeCell)) {\n      dispatch(ActionCreator.setGameStage(mapToWinStage(currentTurn)));\n      dispatch(ActionCreator.setTurn(GameTurns.NOBODYS));\n    } else if (newCells.filter(cell => cell.symbol !== CellSymbols.EMPTY).length === newCells.length) {\n      dispatch(ActionCreator.setGameStage(GameStages.DRAW));\n      dispatch(ActionCreator.setTurn(GameTurns.NOBODYS));\n    } else {\n      dispatch(ActionCreator.setTurn(toggleGameTurn(currentTurn)));\n    }\n  },\n});\n\nexport {App};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/app.jsx';\nimport {createStore} from \"redux\";\nimport {Provider} from \"react-redux\";\nimport {reducer} from './reducer';\n\nconst store = createStore(\n  reducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : (f) => f\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}